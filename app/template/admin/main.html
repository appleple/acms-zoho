<header>
  <div>@include("/admin/topicpath.html")</div>
  <div>
    <h1 class="acms-admin-admin-title js-dialog-title">Zoho API 連携</h1>
  </div>
  <div class="acms-admin-col-md-6"></div>
</header>

<!-- BEGIN_MODULE Touch_Zoho_NotTokenPersistencePath -->
<div class="acms-admin-alert acms-admin-alert-warning">
  「.env」ファイルで「ZOHO_TOKEN_PERSISTENCE_PATH」を設定してください。
</div>
<!-- END_MODULE Touch_Zoho_NotTokenPersistencePath -->

<!-- BEGIN_MODULE Admin_Errors -->
<p class="acms-admin-alert acms-admin-alert-icon acms-admin-alert-danger">
  <span class="acms-admin-icon acms-admin-icon-news acms-admin-alert-icon-before" aria-hidden="true"></span>
  <button class="js-acms-alert-close acms-admin-alert-icon-after">×</button>
  {error}
</p>
<!-- END_MODULE Admin_Errors -->

<div>
  <div class="js-acms_fix_marker acms_fix_bg">
    <div class="acms-admin-form-group acms_fix_bg_index">
      <!-- BEGIN_MODULE Zoho_Admin -->
      <!-- BEGIN_IF [{authorized}/eq/true] -->
      <form action="" method="post" enctype="multipart/form-data" id="oauthForm" class="acms-admin-inline">
        <table>
          <tbody>
            <tr>
              <th>id</th>
              <td>
                <span>{tokenId}</span>
                <input type="hidden" name="zoho_token_id" value="{tokenId}">
              </td>
            </tr>

            <tr>
              <th>クライアントID</th>
              <td>
                <input type="text" name="zoho_client_id" value="{clientId}" readonly>
              </td>
            </tr>

            <tr>
              <th>シークレットID</th>
              <td>
                <input type="text" name="zoho_client_secret" value="{secretId}" readonly>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr></tr>
            <td>
              <button
                type="submit"
                class="acms-admin-btn-admin"
                value="認証解除"
                name="ACMS_POST_Zoho_Deauthorize"
              >
                <!-- T -->認証解除<!-- /T -->
              </button>
            </td>
          </tfoot>
        </table>
      </form>
      <!-- ELSE -->
      <form action="" method="post" enctype="multipart/form-data" id="oauthForm" class="acms-admin-inline">
        <table>
          <tr>
            <th>クライアントID</th>
            <td><input type="text" name="zoho_client_id" value=""></td>
          </tr>
          <tr>
            <th>シークレットID</th>
            <td><input type="text" name="zoho_client_secret" value=""></td>
          </tr>
          <tr>
            <th>リダイレクトURL</th>
            <td>
              <span>%{BASE_URL}admin/app_zoho_callback/</span>
              <input type="hidden" name="zoho_redirect_url" value="%{BASE_URL}admin/app_zoho_callback/">
            </td>
          </tr>
        </table>
        <button
          type="submit"
          class="acms-admin-btn-admin"
          value="認証"
          name="ACMS_POST_Zoho_OAuth2"
        >
          <!-- T -->認証<!-- /T -->
        </button>
      </form>
      <!-- END_IF -->
      <!-- END_MODULE Zoho_Admin -->
    </div>
  </div>
</div>